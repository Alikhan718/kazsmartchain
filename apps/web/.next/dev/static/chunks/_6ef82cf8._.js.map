{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///srv/packages/sdk/src/index.ts"],"sourcesContent":["import { z } from 'zod';\r\n\r\nexport const AuditEventSchema = z.object({\r\n  id: z.string(),\r\n  eventType: z.string(),\r\n  createdAt: z.string(),\r\n  signer: z.string().nullish().transform((val) => val ?? undefined),\r\n  details: z.record(z.any()).nullish().transform((val) => val ?? undefined),\r\n});\r\nexport type AuditEvent = z.infer<typeof AuditEventSchema>;\r\n\r\nexport class KazClient {\r\n  constructor(private readonly baseUrl: string, private readonly bearer?: string) {}\r\n\r\n  private headers(): Record<string, string> {\r\n    const h: Record<string, string> = { 'content-type': 'application/json' };\r\n    if (this.bearer) h.authorization = `Bearer ${this.bearer}`;\r\n    return h;\r\n  }\r\n\r\n  async me() {\r\n    const res = await fetch(`${this.baseUrl}/api/auth/me`, { headers: this.headers() });\r\n    return res.json();\r\n  }\r\n\r\n  async listAudit(tenantId?: string, type?: string, userId?: string) {\r\n    const url = new URL(`${this.baseUrl}/api/audit`);\r\n    if (tenantId) url.searchParams.set('tenantId', tenantId);\r\n    if (type) url.searchParams.set('type', type);\r\n    if (userId) url.searchParams.set('userId', userId);\r\n    const res = await fetch(url, { headers: this.headers() });\r\n    const data = await res.json();\r\n    return z.object({ events: z.array(AuditEventSchema) }).parse(data);\r\n  }\r\n\r\n  async ipfsUpload(orgId: string, filename: string, mime: string, base64: string) {\r\n    const res = await fetch(`${this.baseUrl}/api/ipfs/${orgId}/upload`, {\r\n      method: 'POST',\r\n      headers: this.headers(),\r\n      body: JSON.stringify({ filename, mime, base64 }),\r\n    });\r\n    return res.json();\r\n  }\r\n\r\n  async solanaMint(orgId: string, uri: string, besuTxHash?: string) {\r\n    const res = await fetch(`${this.baseUrl}/api/solana/${orgId}/mint`, {\r\n      method: 'POST',\r\n      headers: this.headers(),\r\n      body: JSON.stringify({ uri, besuTxHash, signerPolicy: 'custodial' }),\r\n    });\r\n    return res.json();\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEO,MAAM,mBAAmB,0KAAC,CAAC,MAAM,CAAC;IACvC,IAAI,0KAAC,CAAC,MAAM;IACZ,WAAW,0KAAC,CAAC,MAAM;IACnB,WAAW,0KAAC,CAAC,MAAM;IACnB,QAAQ,0KAAC,CAAC,MAAM,GAAG,OAAO,GAAG,SAAS,CAAC,CAAC,MAAQ,OAAO;IACvD,SAAS,0KAAC,CAAC,MAAM,CAAC,0KAAC,CAAC,GAAG,IAAI,OAAO,GAAG,SAAS,CAAC,CAAC,MAAQ,OAAO;AACjE;AAGO,MAAM;;;IACX,YAAY,AAAiB,OAAe,EAAE,AAAiB,MAAe,CAAE;aAAnD,UAAA;aAAkC,SAAA;IAAkB;IAEzE,UAAkC;QACxC,MAAM,IAA4B;YAAE,gBAAgB;QAAmB;QACvE,IAAI,IAAI,CAAC,MAAM,EAAE,EAAE,aAAa,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,EAAE;QAC1D,OAAO;IACT;IAEA,MAAM,KAAK;QACT,MAAM,MAAM,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE;YAAE,SAAS,IAAI,CAAC,OAAO;QAAG;QACjF,OAAO,IAAI,IAAI;IACjB;IAEA,MAAM,UAAU,QAAiB,EAAE,IAAa,EAAE,MAAe,EAAE;QACjE,MAAM,MAAM,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC;QAC/C,IAAI,UAAU,IAAI,YAAY,CAAC,GAAG,CAAC,YAAY;QAC/C,IAAI,MAAM,IAAI,YAAY,CAAC,GAAG,CAAC,QAAQ;QACvC,IAAI,QAAQ,IAAI,YAAY,CAAC,GAAG,CAAC,UAAU;QAC3C,MAAM,MAAM,MAAM,MAAM,KAAK;YAAE,SAAS,IAAI,CAAC,OAAO;QAAG;QACvD,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,OAAO,0KAAC,CAAC,MAAM,CAAC;YAAE,QAAQ,0KAAC,CAAC,KAAK,CAAC;QAAkB,GAAG,KAAK,CAAC;IAC/D;IAEA,MAAM,WAAW,KAAa,EAAE,QAAgB,EAAE,IAAY,EAAE,MAAc,EAAE;QAC9E,MAAM,MAAM,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,MAAM,OAAO,CAAC,EAAE;YAClE,QAAQ;YACR,SAAS,IAAI,CAAC,OAAO;YACrB,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAU;gBAAM;YAAO;QAChD;QACA,OAAO,IAAI,IAAI;IACjB;IAEA,MAAM,WAAW,KAAa,EAAE,GAAW,EAAE,UAAmB,EAAE;QAChE,MAAM,MAAM,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,MAAM,KAAK,CAAC,EAAE;YAClE,QAAQ;YACR,SAAS,IAAI,CAAC,OAAO;YACrB,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAK;gBAAY,cAAc;YAAY;QACpE;QACA,OAAO,IAAI,IAAI;IACjB;AACF","debugId":null}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///srv/apps/web/lib/env.ts"],"sourcesContent":["export const API_BASE = process.env.NEXT_PUBLIC_API_BASE_URL || 'http://localhost:4000';\r\nexport const DEV_TOKEN = 'dev:demo-bank:OrgAdmin';\r\nexport const RELAY_BASE = process.env.NEXT_PUBLIC_RELAY_BASE_URL || 'http://localhost:4100';\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;;;AAAwB;AAAjB,MAAM,WAAW,6DAAwC;AACzD,MAAM,YAAY;AAClB,MAAM,aAAa,6DAA0C","debugId":null}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///srv/apps/web/lib/client.ts"],"sourcesContent":["import { KazClient } from '@kazsmartchain/sdk';\r\nimport { API_BASE, DEV_TOKEN } from './env';\r\n\r\nexport function createClient(token?: string) {\r\n  return new KazClient(API_BASE, token || DEV_TOKEN);\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,aAAa,KAAc;IACzC,OAAO,IAAI,+IAAS,CAAC,wIAAQ,EAAE,SAAS,yIAAS;AACnD","debugId":null}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///srv/apps/web/app/orgs/%5Bid%5D/assets/page.tsx"],"sourcesContent":["'use client';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { createClient } from '../../../../lib/client';\r\nimport { Image, Upload, CheckCircle, Copy, ExternalLink, Loader2 } from 'lucide-react';\r\n\r\nexport default function AssetsPage({ params }: { params: Promise<{ id: string }> }) {\r\n  const [cid, setCid] = useState<string | null>(null);\r\n  const [busy, setBusy] = useState(false);\r\n  const [orgId, setOrgId] = useState<string>('');\r\n  const [copied, setCopied] = useState(false);\r\n\r\n  useEffect(() => {\r\n    params.then((p) => setOrgId(p.id));\r\n  }, [params]);\r\n\r\n  async function handleUpload(e: React.FormEvent<HTMLFormElement>) {\r\n    e.preventDefault();\r\n    setBusy(true);\r\n    try {\r\n      const form = e.currentTarget as any;\r\n      const file: File = form.file.files[0];\r\n      if (!file) return;\r\n      const base64 = await file.arrayBuffer().then((b) => {\r\n        const bytes = new Uint8Array(b);\r\n        let binary = '';\r\n        for (let i = 0; i < bytes.byteLength; i++) binary += String.fromCharCode(bytes[i]);\r\n        return btoa(binary);\r\n      });\r\n      const res = await createClient().ipfsUpload(orgId, file.name, file.type, base64);\r\n      setCid(res.cid);\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  function copyToClipboard(text: string) {\r\n    navigator.clipboard.writeText(text);\r\n    setCopied(true);\r\n    setTimeout(() => setCopied(false), 2000);\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div>\r\n        <h1 className=\"text-4xl font-bold bg-gradient-to-r from-blue-400 via-green-400 to-purple-400 bg-clip-text text-transparent mb-2\">\r\n          IPFS Активы\r\n        </h1>\r\n        <p className=\"text-gray-400 text-lg\">Загрузка и управление активами, хранящимися на IPFS</p>\r\n      </div>\r\n\r\n      <div className=\"p-6 rounded-xl border border-gray-800/50 glass card-hover bg-gradient-to-br from-gray-900/80 to-gray-900/40\">\r\n        <div className=\"flex items-center gap-3 mb-4\">\r\n          <div className=\"p-2 rounded-lg bg-blue-500/20 text-blue-400\">\r\n            <Upload className=\"w-5 h-5\" />\r\n          </div>\r\n            <h2 className=\"text-lg font-semibold text-white\">Загрузить актив</h2>\r\n        </div>\r\n        <form onSubmit={handleUpload} className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-300 mb-2\">Выберите файл</label>\r\n            <div className=\"flex items-center gap-3\">\r\n              <input \r\n                name=\"file\" \r\n                type=\"file\" \r\n                className=\"flex-1 border border-gray-700 rounded-lg p-3 bg-gray-800/50 text-gray-200 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-500/20 file:text-blue-400 hover:file:bg-blue-500/30 cursor-pointer\" \r\n                accept=\"image/*,application/json\" \r\n              />\r\n              <button \r\n                type=\"submit\"\r\n                disabled={busy} \r\n                className=\"px-6 py-3 rounded-lg bg-gradient-to-r from-blue-600 to-blue-500 text-white font-medium hover:from-blue-500 hover:to-blue-400 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2\"\r\n              >\r\n                {busy ? (\r\n                  <>\r\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                    <span>Uploading...</span>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Upload className=\"w-4 h-4\" />\r\n                    <span>Загрузить</span>\r\n                  </>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      {cid && (\r\n        <div className=\"p-6 rounded-xl border border-gray-800/50 glass bg-gradient-to-br from-green-500/10 to-green-600/5\">\r\n          <div className=\"flex items-start gap-3 mb-4\">\r\n            <div className=\"p-2 rounded-lg bg-green-500/20 text-green-400\">\r\n              <CheckCircle className=\"w-5 h-5\" />\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <h3 className=\"text-lg font-semibold text-white mb-3\">Загрузка успешна</h3>\r\n              <div className=\"space-y-3\">\r\n                <div>\r\n                  <label className=\"block text-xs font-medium text-gray-400 mb-1\">Идентификатор контента (CID)</label>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <code className=\"flex-1 px-3 py-2 bg-gray-950 border border-gray-800 rounded-lg text-sm text-gray-300 font-mono break-all\">\r\n                      {cid}\r\n                    </code>\r\n                    <button\r\n                      onClick={() => copyToClipboard(cid)}\r\n                      className=\"p-2 rounded-lg bg-gray-800/50 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors\"\r\n                      title=\"Copy CID\"\r\n                    >\r\n                      {copied ? <CheckCircle className=\"w-4 h-4 text-green-400\" /> : <Copy className=\"w-4 h-4\" />}\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-xs font-medium text-gray-400 mb-1\">IPFS URI</label>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <code className=\"flex-1 px-3 py-2 bg-gray-950 border border-gray-800 rounded-lg text-sm text-gray-300 font-mono break-all\">\r\n                      ipfs://{cid}\r\n                    </code>\r\n                    <button\r\n                      onClick={() => copyToClipboard(`ipfs://${cid}`)}\r\n                      className=\"p-2 rounded-lg bg-gray-800/50 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors\"\r\n                      title=\"Copy URI\"\r\n                    >\r\n                      {copied ? <CheckCircle className=\"w-4 h-4 text-green-400\" /> : <Copy className=\"w-4 h-4\" />}\r\n                    </button>\r\n                    <a\r\n                      href={`https://ipfs.io/ipfs/${cid}`}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      className=\"p-2 rounded-lg bg-gray-800/50 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors\"\r\n                      title=\"View on IPFS\"\r\n                    >\r\n                      <ExternalLink className=\"w-4 h-4\" />\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}